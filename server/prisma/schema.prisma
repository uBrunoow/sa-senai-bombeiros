generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  name      String?
  password  String
  isActive  Boolean
  gender    String?
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
  Reports   Report[]
}

model Report {
  id                       Int                        @id @default(autoincrement())
  createdAt                DateTime?                  @default(now())
  updatedAt                DateTime?                  @updatedAt
  reportDate               DateTime?
  name                     String?
  age                      Int?
  gender                   String?
  cpf                      String?
  phone                    String?
  reportPlace              String?
  systolicBloodPressure    Int?
  diastolicBloodPressure   Int?
  bodyTemp                 Int?
  bodyPulse                Int?
  breathing                Int?
  saturation               Int?
  perfusion                perfusion
  ownerId                  Int
  Anamnesis                Anamnesis[]
  Finalization             Finalization[]
  GestationalAnamnesis     GestationalAnamnesis[]
  Glasglow                 Glasglow[]
  PreHospitalMethods       PreHospitalMethod[]
  owner                    User                       @relation(fields: [ownerId], references: [id])
  Report_PreHospitalMethod Report_PreHospitalMethod[]
  Report_Symptoms          Report_Symptoms[]
  SuspectProblems          SuspectProblems[]
  Symptoms                 Symptoms[]
  LocalTraumas             trauma[]
  CinematicAvaliation      CinematicAvaliation[]
}

model Report_PreHospitalMethod {
  id                       Int               @id @default(autoincrement())
  PreHospitalMethodOwnerId Int
  ReportOwnerId            Int
  createdAt                DateTime?         @default(now())
  updatedAt                DateTime?         @updatedAt
  preHospitalMethodOwner   PreHospitalMethod @relation(fields: [PreHospitalMethodOwnerId], references: [id])
  reportOwner              Report            @relation(fields: [ReportOwnerId], references: [id])

  @@unique([ReportOwnerId, PreHospitalMethodOwnerId])
}

model Report_Symptoms {
  id              Int       @id @default(autoincrement())
  SymptomsOwnerId Int
  ReportOwnerId   Int
  createdAt       DateTime? @default(now())
  updatedAt       DateTime? @updatedAt
  reportOwner     Report    @relation(fields: [ReportOwnerId], references: [id])
  symptomsOwner   Symptoms  @relation(fields: [SymptomsOwnerId], references: [id])

  @@unique([ReportOwnerId, SymptomsOwnerId])
}

model PreHospitalMethod {
  id                       Int                        @id @default(autoincrement())
  description              String
  ReportOwnerId            Int
  createdAt                DateTime?                  @default(now())
  updatedAt                DateTime?                  @updatedAt
  reportOwner              Report                     @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
  Report_PreHospitalMethod Report_PreHospitalMethod[]
}

model Symptoms {
  id              Int               @id @default(autoincrement())
  description     String
  ReportOwnerId   Int
  createdAt       DateTime?         @default(now())
  updatedAt       DateTime?         @updatedAt
  Report_Symptoms Report_Symptoms[]
  reportOwner     Report            @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model GestationalAnamnesis {
  id                  Int         @id @default(autoincrement())
  PreNatal            Boolean?
  DoctorName          String?
  NumberSon           Int?
  HiPressure          Boolean?
  BagRuptured         Boolean?
  VisualInspection    Boolean?
  Childbirth          Boolean?
  BornHour            String?
  BabyName            String?
  FinalRemarks        String?
  ReportOwnerId       Int
  createdAt           DateTime?   @default(now())
  updatedAt           DateTime?   @updatedAt
  Complications       Boolean?
  gestationalPeriod   DateTime?
  ContractionSchedule String?
  Duration            String?
  Interval            String?
  BabyGender          BabyGender?
  reportOwner         Report      @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model Anamnesis {
  id                 Int       @id @default(autoincrement())
  SignsAndSymptoms   String?
  HappenedTimes      Boolean?
  SinceHappened      String?
  HealthProblem      Boolean?
  HealthProlemsWhich String?
  Medication         Boolean?
  MedicationWhich    String?
  HourMedication     String?
  Allergies          Boolean?
  AllergiesWhich     String?
  IngestedFood       Boolean?
  WhatTimeFood       String?
  FinalRemarks       String?
  ReportOwnerId      Int
  createdAt          DateTime? @default(now())
  updatedAt          DateTime? @updatedAt
  reportOwner        Report    @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model Glasglow {
  id                    Int       @id @default(autoincrement())
  ReportOwnerId         Int
  eyeOpeningOwnerId     Int?
  verbalResponseOwnerId Int?
  motorResponseOwnerId  Int?
  createdAt             DateTime? @default(now())
  updatedAt             DateTime? @updatedAt
  reportOwner           Report    @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model SuspectProblems {
  id                           Int       @id @default(autoincrement())
  problemaSuspeitoTransporte   String[]  @default([""])
  problemaSuspeitoDiabetes     String[]  @default([""])
  problemaSuspeitoObstetrico   String[]  @default([""])
  problemaSuspeitoRespiratorio String[]  @default([""])
  Another                      String?
  createdAt                    DateTime? @default(now())
  updatedAt                    DateTime? @updatedAt
  ReportOwnerId                Int
  Report                       Report    @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model CinematicAvaliation {
  id                    Int       @id @default(autoincrement())
  comportamentalDisturb Boolean?
  foundWithHelmet       Boolean?
  foundWithSeatbelt     Boolean?
  walkingInTheScene     Boolean?
  damagedWindshield     Boolean?
  damagedPanel          Boolean?
  twistedSteering       Boolean?
  createdAt             DateTime? @default(now())
  updatedAt             DateTime? @updatedAt
  ReportOwnerId         Int
  reportOwner           Report    @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

model Finalization {
  id               Int      @id @default(autoincrement())
  responsable      String?
  conduction       String[]
  transportation   String?
  CollectedObjects String?
  finalRemarks     String?
  ReportOwnerId    Int
  reportOwner      Report   @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
}

enum BabyGender {
  Male
  Female
  Other
}

enum problemaSuspeitoTransporte {
  AEREO
  CLINICO
  EMERGENCIAL
  POS_TRAUMA
  SAMU
  SEM_REMOCAO
}

enum problemaSuspeitoDiabetes {
  HIPOGLICEMIA
  HIPERGLICEMIA
}

enum problemaSuspeitoObstetrico {
  PARTO_GESTACIONAL
  GESTANTE
  HEMORRAGIA_EXCESSIVA
}

enum problemaSuspeitoRespiratorio {
  DPOC
  INLACAO_FUMACA
}

enum perfusion {
  MAIOR_DOIS_SEGUNDOS
  MENOR_DOIS_SEGUNDOS
}

enum localTraumaSide {
  RIGHT
  LEFT
}

enum localTraumaFace {
  FRONT
  BACK
}

enum localTraumasBodyPart {
  COSTAS
  PESCOCO
  GLUTEOS
  BRACO
  ANTEBRACO
  PESCOCOPERNA
  COXA
  CABECA
}

enum tipoTrauma {
  FRATURA
  DIVERSOS
  HEMORRAGIAS
  ESVICERACAO
  FAV_FAV
  AMPUTACAO
  QUEIMADURA_1GRAU
  QUEIMADURA_2GRAU
  QUEIMADURA_3GRAU
}

model trauma {
  id            Int                  @id @default(autoincrement())
  ReportOwnerId Int
  reportOwner   Report               @relation(fields: [ReportOwnerId], references: [id], onDelete: Cascade)
  tipo          tipoTrauma
  bodyPart      localTraumasBodyPart
  side          localTraumaSide
  face          localTraumaFace
}
